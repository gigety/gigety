{"ast":null,"code":"import { SET_PROFILE_CREATED_SUCCESS, SET_PROFILE_CREATED_ERROR, SET_PROFILE_CREATED_WAITING, GET_USER_PROFILE, REMOVE_PROFILE_SUCCESS } from './types';\nimport gigety from 'apis/gigety';\nexport const postGigProfile = (userProfile, images, history) => async dispatch => {\n  const data = new FormData();\n  data.append('userProfile', userProfile);\n  let uri = '/profiles/createProfileNoImage';\n\n  if (images.length > 0) {\n    data.append('file', images[0]);\n    uri = '/profiles/createProfile';\n  }\n\n  try {\n    const postedProfile = await gigety.post(uri, data, {\n      headers: {\n        'content-type': 'multipart/form-data'\n      }\n    }); //TODO: Still needs to handle slow posts. I am thinking maybe have a spinner in a\n    //newly allocated profileLable on account page\n\n    dispatch({\n      type: SET_PROFILE_CREATED_WAITING,\n      payload: false\n    });\n    dispatch({\n      type: SET_PROFILE_CREATED_SUCCESS,\n      payload: postedProfile\n    });\n  } catch (error) {\n    console.error('Error creating user profile : ', error); //TODO: THis needs to be handled on UI\n\n    dispatch({\n      type: SET_PROFILE_CREATED_ERROR,\n      payload: error\n    });\n    throw error;\n  }\n\n  dispatch({\n    type: SET_PROFILE_CREATED_WAITING,\n    payload: true\n  });\n  history.push('/user/account');\n};\nexport const addProfileToProfileList = userProfile => (dispatch, getState) => {\n  const {\n    profileList\n  } = getState().userAccount;\n};\nexport const getUserProfile = id => async (dispatch, getState) => {\n  try {\n    const response = await gigety.get(`/pnode/profiles/${id}`);\n    dispatch({\n      type: GET_USER_PROFILE,\n      payload: response.data\n    });\n  } catch (error) {\n    console.error(`Error getting user profile for id ${id}`, error);\n    throw error;\n  }\n};\nexport const removeGigProfile = (id, history) => async dispatch => {\n  try {\n    const response = await gigety.delete(`/profiles/${id}`);\n    dispatch({\n      type: REMOVE_PROFILE_SUCCESS,\n      payload: response.data\n    });\n    history.push('/user/account');\n  } catch (error) {\n    console.error(`Error  user profile for id ${id}`, error);\n    throw error;\n  }\n};","map":{"version":3,"sources":["/Users/samuelsegal/git/gigety/gigety-reactjs/src/redux/actions/gigProfileAction.js"],"names":["SET_PROFILE_CREATED_SUCCESS","SET_PROFILE_CREATED_ERROR","SET_PROFILE_CREATED_WAITING","GET_USER_PROFILE","REMOVE_PROFILE_SUCCESS","gigety","postGigProfile","userProfile","images","history","dispatch","data","FormData","append","uri","length","postedProfile","post","headers","type","payload","error","console","push","addProfileToProfileList","getState","profileList","userAccount","getUserProfile","id","response","get","removeGigProfile","delete"],"mappings":"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","sourcesContent":["import {\n\tSET_PROFILE_CREATED_SUCCESS,\n\tSET_PROFILE_CREATED_ERROR,\n\tSET_PROFILE_CREATED_WAITING,\n\tGET_USER_PROFILE,\n\tREMOVE_PROFILE_SUCCESS,\n} from './types';\nimport gigety from 'apis/gigety';\n\nexport const postGigProfile = (userProfile, images, history) => async (dispatch) => {\n\tconst data = new FormData();\n\tdata.append('userProfile', userProfile);\n\tlet uri = '/profiles/createProfileNoImage';\n\n\tif (images.length > 0) {\n\t\tdata.append('file', images[0]);\n\t\turi = '/profiles/createProfile';\n\t}\n\n\ttry {\n\t\tconst postedProfile = await gigety.post(uri, data, {\n\t\t\theaders: { 'content-type': 'multipart/form-data' },\n\t\t});\n\t\t//TODO: Still needs to handle slow posts. I am thinking maybe have a spinner in a\n\t\t//newly allocated profileLable on account page\n\t\tdispatch({ type: SET_PROFILE_CREATED_WAITING, payload: false });\n\t\tdispatch({ type: SET_PROFILE_CREATED_SUCCESS, payload: postedProfile });\n\t} catch (error) {\n\t\tconsole.error('Error creating user profile : ', error);\n\t\t//TODO: THis needs to be handled on UI\n\t\tdispatch({ type: SET_PROFILE_CREATED_ERROR, payload: error });\n\t\tthrow error;\n\t}\n\tdispatch({ type: SET_PROFILE_CREATED_WAITING, payload: true });\n\thistory.push('/user/account');\n};\n\nexport const addProfileToProfileList = (userProfile) => (dispatch, getState) => {\n\tconst { profileList } = getState().userAccount;\n};\n\nexport const getUserProfile = (id) => async (dispatch, getState) => {\n\ttry {\n\t\tconst response = await gigety.get(`/pnode/profiles/${id}`);\n\t\tdispatch({ type: GET_USER_PROFILE, payload: response.data });\n\t} catch (error) {\n\t\tconsole.error(`Error getting user profile for id ${id}`, error);\n\t\tthrow error;\n\t}\n};\n\nexport const removeGigProfile = (id, history) => async (dispatch) => {\n\ttry {\n\t\tconst response = await gigety.delete(`/profiles/${id}`);\n\t\tdispatch({ type: REMOVE_PROFILE_SUCCESS, payload: response.data });\n\t\thistory.push('/user/account');\n\t} catch (error) {\n\t\tconsole.error(`Error  user profile for id ${id}`, error);\n\t\tthrow error;\n\t}\n};\n"]},"metadata":{},"sourceType":"module"}