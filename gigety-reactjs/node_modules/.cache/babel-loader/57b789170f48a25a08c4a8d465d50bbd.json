{"ast":null,"code":"import gigety from 'apis/gigety';\nimport { GET_ERRORS, UPDATE_ACTIVE_CONTACT, UPDATE_CONTACT_LIST } from './types';\nexport const findUserContacts = userId => async dispatch => {\n  try {\n    const response = await gigety.get(`/contacts/${userId}`);\n    dispatch({\n      type: UPDATE_CONTACT_LIST,\n      payload: response.data\n    });\n  } catch (error) {\n    console.error('ERROR :: ', error);\n    dispatch({\n      type: GET_ERRORS,\n      payload: error\n    });\n  }\n};\nexport const updateActiveContact = contact => async (dispatch, getState) => {\n  try {\n    const {\n      contacts\n    } = getState().contacts;\n    console.log('CCCCCOOOONNTACS :: ', contacts);\n    console.log(contact);\n    contact = JSON.parse(contact);\n    let activeContact = contacts.filter(c => {\n      console.log(c.contactId);\n      console.log(contact['contactId']);\n      console.log(c.contactId === contact.contactId);\n      return c.contactId === contact.contactId;\n    });\n    console.log('found active contact :: ', activeContact);\n\n    if (!activeContact) {\n      try {\n        const response = await gigety.post('/contacts', contact);\n        activeContact = response.data;\n      } catch (error) {\n        console.warn(error);\n      }\n    }\n\n    dispatch({\n      type: UPDATE_ACTIVE_CONTACT,\n      payload: activeContact\n    });\n  } catch (error) {\n    console.error('ERROR :: ', error);\n    dispatch({\n      type: GET_ERRORS,\n      payload: error\n    });\n  }\n};","map":{"version":3,"sources":["/Users/samuelsegal/git/gigety/gigety-reactjs/react-gigety/src/redux/actions/contactsAction.js"],"names":["gigety","GET_ERRORS","UPDATE_ACTIVE_CONTACT","UPDATE_CONTACT_LIST","findUserContacts","userId","dispatch","response","get","type","payload","data","error","console","updateActiveContact","contact","getState","contacts","log","JSON","parse","activeContact","filter","c","contactId","post","warn"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,aAAnB;AACA,SAASC,UAAT,EAAqBC,qBAArB,EAA4CC,mBAA5C,QAAuE,SAAvE;AAEA,OAAO,MAAMC,gBAAgB,GAAIC,MAAD,IAAY,MAAOC,QAAP,IAAoB;AAC/D,MAAI;AACH,UAAMC,QAAQ,GAAG,MAAMP,MAAM,CAACQ,GAAP,CAAY,aAAYH,MAAO,EAA/B,CAAvB;AACAC,IAAAA,QAAQ,CAAC;AACRG,MAAAA,IAAI,EAAEN,mBADE;AAERO,MAAAA,OAAO,EAAEH,QAAQ,CAACI;AAFV,KAAD,CAAR;AAIA,GAND,CAME,OAAOC,KAAP,EAAc;AACfC,IAAAA,OAAO,CAACD,KAAR,CAAc,WAAd,EAA2BA,KAA3B;AACAN,IAAAA,QAAQ,CAAC;AACRG,MAAAA,IAAI,EAAER,UADE;AAERS,MAAAA,OAAO,EAAEE;AAFD,KAAD,CAAR;AAIA;AACD,CAdM;AAgBP,OAAO,MAAME,mBAAmB,GAAIC,OAAD,IAAa,OAAOT,QAAP,EAAiBU,QAAjB,KAA8B;AAC7E,MAAI;AACH,UAAM;AAAEC,MAAAA;AAAF,QAAeD,QAAQ,GAAGC,QAAhC;AACAJ,IAAAA,OAAO,CAACK,GAAR,CAAY,qBAAZ,EAAmCD,QAAnC;AACAJ,IAAAA,OAAO,CAACK,GAAR,CAAYH,OAAZ;AACAA,IAAAA,OAAO,GAAGI,IAAI,CAACC,KAAL,CAAWL,OAAX,CAAV;AACA,QAAIM,aAAa,GAAGJ,QAAQ,CAACK,MAAT,CAAiBC,CAAD,IAAO;AAC1CV,MAAAA,OAAO,CAACK,GAAR,CAAYK,CAAC,CAACC,SAAd;AACAX,MAAAA,OAAO,CAACK,GAAR,CAAYH,OAAO,CAAC,WAAD,CAAnB;AACAF,MAAAA,OAAO,CAACK,GAAR,CAAYK,CAAC,CAACC,SAAF,KAAgBT,OAAO,CAACS,SAApC;AACA,aAAOD,CAAC,CAACC,SAAF,KAAgBT,OAAO,CAACS,SAA/B;AACA,KALmB,CAApB;AAMAX,IAAAA,OAAO,CAACK,GAAR,CAAY,0BAAZ,EAAwCG,aAAxC;;AACA,QAAI,CAACA,aAAL,EAAoB;AACnB,UAAI;AACH,cAAMd,QAAQ,GAAG,MAAMP,MAAM,CAACyB,IAAP,CAAY,WAAZ,EAAyBV,OAAzB,CAAvB;AACAM,QAAAA,aAAa,GAAGd,QAAQ,CAACI,IAAzB;AACA,OAHD,CAGE,OAAOC,KAAP,EAAc;AACfC,QAAAA,OAAO,CAACa,IAAR,CAAad,KAAb;AACA;AACD;;AACDN,IAAAA,QAAQ,CAAC;AACRG,MAAAA,IAAI,EAAEP,qBADE;AAERQ,MAAAA,OAAO,EAAEW;AAFD,KAAD,CAAR;AAIA,GAxBD,CAwBE,OAAOT,KAAP,EAAc;AACfC,IAAAA,OAAO,CAACD,KAAR,CAAc,WAAd,EAA2BA,KAA3B;AACAN,IAAAA,QAAQ,CAAC;AACRG,MAAAA,IAAI,EAAER,UADE;AAERS,MAAAA,OAAO,EAAEE;AAFD,KAAD,CAAR;AAIA;AACD,CAhCM","sourcesContent":["import gigety from 'apis/gigety';\nimport { GET_ERRORS, UPDATE_ACTIVE_CONTACT, UPDATE_CONTACT_LIST } from './types';\n\nexport const findUserContacts = (userId) => async (dispatch) => {\n\ttry {\n\t\tconst response = await gigety.get(`/contacts/${userId}`);\n\t\tdispatch({\n\t\t\ttype: UPDATE_CONTACT_LIST,\n\t\t\tpayload: response.data,\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('ERROR :: ', error);\n\t\tdispatch({\n\t\t\ttype: GET_ERRORS,\n\t\t\tpayload: error,\n\t\t});\n\t}\n};\n\nexport const updateActiveContact = (contact) => async (dispatch, getState) => {\n\ttry {\n\t\tconst { contacts } = getState().contacts;\n\t\tconsole.log('CCCCCOOOONNTACS :: ', contacts);\n\t\tconsole.log(contact);\n\t\tcontact = JSON.parse(contact);\n\t\tlet activeContact = contacts.filter((c) => {\n\t\t\tconsole.log(c.contactId);\n\t\t\tconsole.log(contact['contactId']);\n\t\t\tconsole.log(c.contactId === contact.contactId);\n\t\t\treturn c.contactId === contact.contactId;\n\t\t});\n\t\tconsole.log('found active contact :: ', activeContact);\n\t\tif (!activeContact) {\n\t\t\ttry {\n\t\t\t\tconst response = await gigety.post('/contacts', contact);\n\t\t\t\tactiveContact = response.data;\n\t\t\t} catch (error) {\n\t\t\t\tconsole.warn(error);\n\t\t\t}\n\t\t}\n\t\tdispatch({\n\t\t\ttype: UPDATE_ACTIVE_CONTACT,\n\t\t\tpayload: activeContact,\n\t\t});\n\t} catch (error) {\n\t\tconsole.error('ERROR :: ', error);\n\t\tdispatch({\n\t\t\ttype: GET_ERRORS,\n\t\t\tpayload: error,\n\t\t});\n\t}\n};\n"]},"metadata":{},"sourceType":"module"}